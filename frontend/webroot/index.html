<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<script type="text/javascript" src="js/jquery-1.7.2.js"></script>
<script type="text/javascript" src="js/jquery.autoellipsis-1.0.3.min.js"></script>

<!-- less  setup start -->
  <script type="text/javascript">
    less = { env: 'development' }; </script>
<link rel="stylesheet/less" type="text/css" href="css/info2012-styles.v3.less">
<script src="css/less-1.3.0.min.js" type="text/javascript"></script>
<!-- less setup end -->

<!-- clock -->
<script type="text/javascript" src="js/clock.js"></script>

<!-- photo slideshow -->
<script type="text/javascript" src="js/jquery.cycle.all.latest.js"></script>
<script type="text/javascript" src="js/sl2012-slideshow.js"></script>

<!-- video slider setup -->
<script src="http://www.google.com/jsapi" type="text/javascript"></script>
<script type="text/javascript" src="js/video-slider.js"></script>


<!-- font -->
<script src="js/cufon-yui.js" type="text/javascript"></script>
<script src="js/chevin_pro_font.js" type="text/javascript"></script>
<link href='http://fonts.googleapis.com/css?family=Istok+Web:700&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'>
<script type="text/javascript">
  $(document).ready(function(){
    Cufon.replace('.ticker');
    Cufon.replace('#text-container');

    // DEBUG CODE:
      var video_album = {
        "type": "video",
        "title": "Alle timelapses",
        "content":[
          {
            "byline": "MHD",
            "caption": "En video",
            "src": "B_cBAiZh1zE"
          },
          {
            "byline": "MHD",
            "caption": "En anden video",
            "src": "oquGdcq9PbE"
          }
        ]
      };

       var photo_album = {
        "type": "image",
        "title": "Billeder fra fredag",
        "content":
          [
            {
              "byline": "MHD",
              "caption": "Beskrivelse 5",
              "src": "http://flab.dk/~mads/sl2012/info/IMG_0209_0.jpg",
            },
            {
              "byline": "Random dude",
                "caption": "Beskrivelse 1",
              "src": "http://flab.dk/~mads/sl2012/info/IMG_0204_1.jpg",
            }
          ]
      };

      // attached to window. as a hack until we get subscription
      //playVideoAlbum(video_album, function(){console.log("playback completed");});
      var albums = [photo_album, video_album];
      var albumCount = 0;

      var playNextAlbum = function(){
        console.log("master: album count: " + albumCount + " length: " + albums.length + " mod: " + albumCount % albums.length);
        // TODO: do clever stuff to discover if we have new data
        if(albums.length > 0){
          var album = albums[albumCount % albums.length];

          if(album.type == "image"){
            console.log("master: playing image album");
            playPhotoAlbum(album, playNextAlbum);
          }
          else if(album.type == "video"){
            console.log("master: playing video album");
            playVideoAlbum(album, playNextAlbum)
          }
          albumCount++;
        }
      };

      playNextAlbum();

  });
</script>


</head>
<body>
  <div id="horizon">
        <div id="canvas">
          <div id="upper" class="canvas-section">
            <div class="clock vcenter"><div class="center" id="clock">13:37:00</div></div>
            <div class="media">

              <div class="media-inner" id="mediacanvas">

              </div>
              <div class="mediacurtain" id="mediacurtain" ></div>

            </div>

            <div id="text-container">
              <div id="bodytext"></div>
              <div id="byline"></div>
            </div>

          </div>
          <div id="lower" class="canvas-section">
            <div class="ticker vcenter">
              <div class="marquee">
                <span class="news-item">
                  <b>Nyhed 1:</b> En nyhed om noget
                </span>
                <span class="news-item">
                  <b>Nyhed 2:</b> En nyhed om andet
                </span>
                <span class="news-item">
                  <b>Nyhed 3:</b> En nyhed om tredje
                </span>
              </marquee>
            </div>
          </div>
        </div>
      </div>
      </body>
</html>
